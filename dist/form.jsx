/**
 * @overview A form component generated by tfc.
 * @author your.name@corp.com
 */
import React from "react";
import classnames from "classnames";
import schema from "./schema";
import { useModel, useValidation } from "./hooks";
import { Card, List, InputItem, Picker, DatePicker } from "antd-mobile";
/**
 * Say something to avoid warnning from eslint
 */

export default function () {
  const [model, setModel] = useModel({
    preOpeningTime: new Date()
  });
  const [validate, errors] = useValidation(schema);

  const handleSubmit = () => validate(model).then(() => alert("Amazing!!")).catch(console.error);

  const handleChangeInput = name => value => setModel(name, value);

  const handleLeaveInput = name => () => validate(name, model[name]);

  const handleChangeSelect = name => value => {
    setModel(name, value);
    validate(name, value);
  };

  const renderClassName = (name, properties) => classnames(...(properties || []), {
    error: Array.isArray(errors) && errors.some(e => e.path === name),
    hasValue: !(model[name] === null || typeof model[name] === "undefined")
  });

  const Required = () => <i className="required">*</i>;

  return <div>
    <List>
      <InputItem name="expandProjectNo" className={renderClassName("expandProjectNo")} onChange={handleChangeInput("expandProjectNo")} onBlur={handleLeaveInput("expandProjectNo")}>expandProjectNo</InputItem>
      <InputItem name="shopLocation" className={renderClassName("shopLocation")} onChange={handleChangeInput("shopLocation")} onBlur={handleLeaveInput("shopLocation")}>门店地址</InputItem>
      <InputItem name="preLongitude" className={renderClassName("preLongitude")} onChange={handleChangeInput("preLongitude")} onBlur={handleLeaveInput("preLongitude")}>经度</InputItem>
      <InputItem name="preLatitude" className={renderClassName("preLatitude")} onChange={handleChangeInput("preLatitude")} onBlur={handleLeaveInput("preLatitude")}>纬度</InputItem>
      <InputItem name="preOpeningTime" className={renderClassName("preOpeningTime")} onChange={handleChangeInput("preOpeningTime")}>预开业时间<Required /></InputItem>
      <InputItem name="isSupportCanteen" className={renderClassName("isSupportCanteen")} onChange={handleChangeInput("isSupportCanteen")} onBlur={handleLeaveInput("isSupportCanteen")}>支持堂食<Required /></InputItem>
      <InputItem name="seatsNumber" className={renderClassName("seatsNumber")} onChange={handleChangeInput("seatsNumber")} onBlur={handleLeaveInput("seatsNumber")}>座位数<Required /></InputItem>
      <InputItem name="active" className={renderClassName("active")} onChange={handleChangeInput("active")}>生效的<Required /></InputItem>
    </List>
  </div>;
}