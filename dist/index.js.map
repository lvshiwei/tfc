{"version":3,"file":"index.js","sources":["../src/lib/asserts.js","../src/JsonMockDescription.js","../src/parseJsonMock.js","../src/constants.js","../src/YupSchemaDescription.js","../src/parseYupSchema.js","../src/prepareGenerateYupSchema.js","../src/generateYupSchema.js","../src/generateAntDesignForm.js","../src/index.js"],"sourcesContent":["export const isNull = v => v === null;\nexport const isUndefined = v => typeof v === \"undefined\";\nexport const isNullOrUndefined = v => isNull(v) || isUndefined(v);\n\nexport const isNotEmptyArray = v => Array.isArray(v) && v.length > 0;\nexport const isArrayButEmpty = v => Array.isArray(v) && v.length === 0;\n\nexport const isNotEmptyString = v => typeof v === \"string\" && v.length > 0;\nexport const isStringButEmpty = v => isNullOrUndefined(v) || v === \"\";\n\nexport const isPositiveNumber = v => typeof v === \"number\" && v > 0;\nexport const isNegativeNumber = v => typeof v === \"number\" && v < 0;\nexport const isRealNumber = v =>\n  v === 0 || isPositiveNumber(v) || isNegativeNumber(v);\n\nexport const isFunction = v => typeof v === \"function\";\n","import { isNotEmptyString } from './lib/asserts';\n\n/**\n * Json Mock 描述文档\n */\nexport class JsonMockDescription {\n  constructor() {\n    this.properties = [];\n  }\n}\n\n/**\n * Json Mock 字段属性描述\n */\nexport class JsonMockPropertyDescriptor {\n  constructor(key, value, annotations = []) {\n    this.key = key;\n    this.value = value;\n    this.annotations = annotations;\n  }\n}\n\n/**\n * Json Mock 申明指令\n */\nexport class JsonMockPropertyAnnotation {\n  constructor(header, body) {\n    this.header = header;\n    this.body = body;\n    // this.parameters = [];\n  }\n\n  get method() {\n    return this.header.substring(1);\n  }\n}\n\nexport class JsonMockPropertyNothingAnnotation extends JsonMockPropertyDescriptor {\n  constructor() {\n    super(null, []);\n  }\n}\n","import traverse from '@babel/traverse';\nimport { parse } from '@babel/parser';\nimport {\n  isNotEmptyArray,\n  isNullOrUndefined,\n  isNotEmptyString,\n} from './lib/asserts';\nimport {\n  JsonMockDescription,\n  JsonMockPropertyDescriptor,\n  JsonMockPropertyAnnotation,\n} from './JsonMockDescription';\n\n/**\n * parse JSON Mock script content, generate JSON Mock Description\n * @see ./JsonMockDescription.js\n * @param {String} text\n */\nexport default function (text) {\n  const ast = parse(text, { sourceType: 'module' });\n  const description = traverseJsonMockAST(ast);\n\n  return description;\n}\n\nexport function traverseJsonMockAST(ast) {\n  const description = new JsonMockDescription();\n\n  const propertyVisitor = {\n    ObjectProperty(path) {\n      const property = makeJsonMockProperty(path.node);\n      description.properties.push(property);\n    },\n  };\n\n  traverse(ast, {\n    ExportDefaultDeclaration(path) {\n      path.traverse({\n        ObjectExpression(path) {\n          path.traverse(propertyVisitor);\n        },\n      });\n    },\n  });\n\n  return description;\n}\n\n/**\n * 解析抽象语法节点\n * @param {Node} astNode ast 节点\n */\nexport function makeJsonMockProperty(astNode) {\n  const { key, value, leadingComments } = astNode;\n  const anotations = leadingComments\n    .map((comment) => makeAnnotation(key.name, comment))\n    .filter((i) => !isNullOrUndefined(i));\n\n  return new JsonMockPropertyDescriptor(key.name, value.value, anotations);\n}\n/**\n * 解析申明\n * @param {*} text\n */\nexport function makeAnnotation(key, leadingComment) {\n  if (leadingComment.value.trim() === '') {\n    return null;\n  }\n\n  const r = /\\s*(\\S*)\\s(.*)/;\n  const matches = leadingComment.value.match(r);\n\n  if (isNotEmptyArray(matches)) {\n    const [, b, c] = matches;\n    let header, body;\n    if (isNotEmptyString(b)) {\n      header = b.trim();\n      body = c.trim();\n    } else if (b === '' && c.includes('@')) {\n      header = c.trim();\n      body = null;\n    } else {\n      header = '@label';\n      body = c.trim();\n    }\n\n    return new JsonMockPropertyAnnotation(header, body);\n  } else {\n    return new JsonMockPropertyAnnotation('@label', key);\n  }\n}\n","export const YUP_TYPE_STRING = 'string';\nexport const YUP_TYPE_Number = 'number';\nexport const YUP_TYPE_BOOL = 'bool';\nexport const YUP_TYPE_DATE = 'date';\nexport const YUP_TYPE_ARRAY = 'array';\nexport const YUP_TYPE_MIXED = 'mixed';\nexport const YUP_KEYWORD_REQUIRED = 'required';\nexport const YUP_KEYWORD_LABEL = 'label';\n/**\n * YUP合法的指令集\n */\nexport const YUP_TYPE_LIST = [\n  YUP_TYPE_MIXED,\n  YUP_TYPE_STRING,\n  YUP_TYPE_Number,\n  YUP_TYPE_DATE,\n  YUP_TYPE_ARRAY,\n  YUP_TYPE_BOOL,\n];\n","/**\n * @overview 规则描述文档, 用于生成表单\n * @author shiwei.lv\n */\n\nimport {\n  YUP_TYPE_LIST,\n  YUP_KEYWORD_REQUIRED,\n  YUP_KEYWORD_LABEL,\n} from './constants';\nimport { isNullOrUndefined } from './lib/asserts';\n\nexport class YupSchemaDescription {\n  constructor() {\n    this.rules = [];\n  }\n}\n\nexport class YupSchemaRuleDescriptor {\n  constructor(name, attributes = []) {\n    this.name = name;\n    this.attributes = attributes;\n    this._label = null;\n    this._dataType = null;\n    this._isRequired = null;\n  }\n\n  get label() {\n    if (!isNullOrUndefined(this._label)) {\n      return this._label;\n    }\n\n    const found = this.attributes.find(\n      (attr) => attr.key === YUP_KEYWORD_LABEL,\n    );\n    if (!isNullOrUndefined(found)) {\n      this._label = found.values[0];\n      return this._label;\n    }\n  }\n\n  get dataType() {\n    if (!isNullOrUndefined(this._dataType)) {\n      return this._dataType;\n    }\n\n    const found = this.attributes.find(\n      (attr) => attr.isDataTypeAttribute === true,\n    );\n\n    if (!isNullOrUndefined(found)) {\n      this._dataType = found.key;\n      return found.key;\n    }\n  }\n\n  isRequired() {\n    if (!isNullOrUndefined(this._isRequired)) {\n      return this._isRequired;\n    }\n\n    return this.hasAttribute(YUP_KEYWORD_REQUIRED);\n  }\n\n  hasAttribute(name) {\n    return this.attributes.some(({ key }) => key === name);\n  }\n  getAttribute(key) {\n    return this.attributes.find((attr) => attr.key === key);\n  }\n}\n\nexport class YupSchemaRuleAttributeDescriptor {\n  constructor(key, values = []) {\n    this.key = key;\n    this.values = values;\n    this.isDataTypeAttribute = YUP_TYPE_LIST.includes(key);\n  }\n}\n","import { parse } from '@babel/parser';\nimport traverse from '@babel/traverse';\nimport * as t from '@babel/types';\nimport {\n  YupSchemaDescription,\n  YupSchemaRuleDescriptor,\n  YupSchemaRuleAttributeDescriptor,\n} from './YupSchemaDescription';\n\n/**\n * parse Yup Schema script content to make Yup Schema description\n * @see ./YupSchemaDescription.js\n * @param {string} text\n */\nexport default function (text) {\n  const ast = parse(text, { sourceType: 'module' });\n  const description = traverseYupSchemaAST(ast);\n\n  return description;\n}\n\nexport function traverseYupSchemaAST(ast) {\n  let meetExportDefaultObjectNode = false;\n  const desc = new YupSchemaDescription();\n\n  traverse(ast, {\n    ExportDefaultDeclaration(path) {\n      const { declaration: objectNode } = path.node;\n      if (\n        t.isCallExpression(objectNode) &&\n        t.isIdentifier(objectNode.callee) &&\n        objectNode.callee.name === 'object'\n      ) {\n        meetExportDefaultObjectNode = true;\n\n        for (const property of objectNode.arguments[0].properties) {\n          const { key, value } = property;\n          const attributes = [];\n          makeRuleDescriptor(value, attributes);\n          const rule = new YupSchemaRuleDescriptor(key.name);\n          rule.attributes = attributes;\n\n          desc.rules.push(rule);\n        }\n      }\n    },\n  });\n\n  if (meetExportDefaultObjectNode) {\n    console.log('done.');\n\n    return desc;\n  } else {\n    console.error(\n      'did not meet export default object call expression. failed!',\n    );\n  }\n}\n\nfunction makeRuleDescriptor(value, attributes) {\n  if (t.isCallExpression(value)) {\n    const { callee } = value;\n\n    attributes.push(\n      new YupSchemaRuleAttributeDescriptor(\n        t.isMemberExpression(callee) ? callee.property.name : callee.name,\n        makeValues(value.arguments),\n      ),\n    );\n\n    if (t.isMemberExpression(callee)) {\n      makeRuleDescriptor(callee.object, attributes);\n    }\n  }\n}\n\nfunction makeValues(parameters) {\n  return parameters.map((arg) => {\n    if (t.isArrayExpression(arg)) {\n      return arg.elements.map((e) => e.value);\n    } else {\n      return arg.value;\n    }\n  });\n}\n","/**\n * @overview prepare for generating YupSchema\n * @author shiwei.lv\n */\n\nimport { isNullOrUndefined, isNotEmptyString } from './lib/asserts';\nimport { JsonMockPropertyAnnotation } from './JsonMockDescription';\nimport { YUP_TYPE_LIST } from './constants';\n/**\n * 检查指令是否支持\n */\nconst isSupported = (d) => YUP_TYPE_LIST.includes(d);\n/**\n * prepare for generating YupSchema\n * @param {JsonMockDescription} jsonMockDescription description object\n */\nexport default function (jsonMockDescription) {\n  console.log('preparing ....');\n  for (const property of jsonMockDescription.properties) {\n    ensureKeyAnnotation(property);\n    sortAnnotations(property);\n    preciselyAnnotationParameters(property);\n  }\n  // debugger;\n}\n\nfunction ensureKeyAnnotation(property) {\n  const found = property.annotations.find((a) => isSupported(a.method));\n  if (!isNullOrUndefined(found)) {\n    return found.method;\n  }\n\n  const type = detect(property.value);\n  const annotation = new JsonMockPropertyAnnotation(type);\n\n  property.annotations.push(annotation);\n\n  function detect(value) {\n    const b = /^(true|false)$/i;\n    const d = /^[0-9]?$/;\n    const f = /^[1-9]d*.d*|0.d*[1-9]d*$/;\n\n    if (b.test(value)) return '@bool';\n    if (d.test(value)) return '@number';\n    if (f.test(value)) return '@number';\n\n    return '@string';\n  }\n\n  return annotation.method;\n}\n/**\n * 排序\n */\nfunction sortAnnotations(property) {\n  const index = property.annotations.findIndex((a) => isSupported(a.method));\n  if (index > -1) {\n    const annotation = property.annotations[index];\n    property.annotations.splice(index, 1);\n    property.annotations.push(annotation);\n  }\n}\n\n/**\n * 参数精准化\n * @param {*} property\n */\nfunction preciselyAnnotationParameters(property) {\n  function cast(value) {\n    const b = /^(true|false)$/i;\n    const d = /^[0-9]?$/;\n    const f = /^[1-9]d*.d*|0.d*[1-9]d*$/;\n    const t = /^[1-9]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/;\n\n    if (b.test(value)) {\n      return Boolean(value);\n    }\n    if (t.test(value)) {\n      return new Date(value);\n    }\n    if (d.test(value)) {\n      return Number(value);\n    }\n    if (f.test(value)) {\n      return Number(value);\n    }\n\n    return String(value);\n  }\n\n  for (const annotation of property.annotations) {\n    const params = annotation.body;\n    if (isNotEmptyString(params)) {\n      annotation.parameters = params.split(',').map((s) => cast(s.trim()));\n    }\n  }\n}\n","import * as t from '@babel/types';\nimport generate from '@babel/generator';\nimport prepareGenerateYupSchema from './prepareGenerateYupSchema';\nimport { parse } from '@babel/parser';\nimport { isNotEmptyArray } from './lib/asserts';\nimport { JsonMockDescription } from './JsonMockDescription';\n\nconst CODE_TEMPLATE = `\n/**\n* @overview A Yup schema generated by tfc.\n*/\nimport { object, mixed, date, string, number, array } from \"yup\";\n\nexport default object();\n`;\n/**\n * generate yup schema code\n * @see ./JsonMockDescription.js\n * @param {JsonMockDescription} description json mock descripton object\n */\nexport default function (description) {\n  prepareGenerateYupSchema(description);\n\n  const ast = parse(CODE_TEMPLATE, { sourceType: 'module' });\n  const objectDeclaration = ast.program.body[1].declaration;\n\n  const properties = [];\n  for (const property of description.properties) {\n    const rules = makeRule(property);\n    properties.push(t.objectProperty(t.identifier(property.key), rules));\n  }\n\n  objectDeclaration.arguments.push(t.objectExpression(properties));\n\n  const output = generate(ast, {}, CODE_TEMPLATE);\n  const text = ensureReadableText(output.code);\n\n  return text;\n}\n\nfunction makeRule(property) {\n  if (isNotEmptyArray(property.annotations)) {\n    return buildChainExpression(property.annotations, 0);\n  }\n}\n\nfunction buildChainExpression(annotations, index) {\n  if (annotations.length === 1 || index === annotations.length - 1) {\n    const ann = annotations[index];\n\n    return t.callExpression(t.identifier(ann.method), makeRuleArguments(ann));\n  }\n\n  const ann = annotations[index];\n  return t.callExpression(\n    t.memberExpression(\n      buildChainExpression(annotations, index + 1),\n      t.identifier(ann.method),\n    ),\n    makeRuleArguments(annotations[index]),\n  );\n}\n/**\n * 构建规则参数\n */\nfunction makeRuleArguments(annotation) {\n  function cast(value) {\n    const type = typeof value;\n    switch (type) {\n      case 'string':\n        return t.stringLiteral(value);\n      case 'number':\n        return t.numericLiteral(value);\n      case 'boolean':\n        return t.booleanLiteral(value);\n      default:\n        return t.stringLiteral(value);\n    }\n  }\n\n  return isNotEmptyArray(annotation.parameters)\n    ? annotation.parameters.map(cast)\n    : [];\n}\n\n/**\n * 将unicode字符转化成可读的汉字\n * @param {*} unicodeText\n */\nfunction ensureReadableText(unicodeText) {\n  const r = /\\\\u([\\d\\w]{4})/gi;\n  const dest = unicodeText.replace(r, function (match, grp) {\n    return String.fromCharCode(parseInt(grp, 16));\n  });\n  return decodeURIComponent(dest);\n}\n","/**\n * @overview generate form code from schema description object\n * @see ./SchemaDescription.js\n * @author shiwei.lv\n */\n\nimport * as t from '@babel/types';\nimport generate from '@babel/generator';\nimport { parse } from '@babel/parser';\nimport { YUP_TYPE_LIST, YUP_TYPE_DATE } from './constants';\n\nconst CODE_TEMPLATE = `\n/**\n * @overview A form component generated by tfc.\n * @author your.name@corp.com\n */\nimport React from \"react\";\nimport classnames from \"classnames\";\nimport schema from \"./schema\";\nimport { useModel, useValidation } from \"./hooks\";\nimport { List, InputItem, Picker, DatePicker } from \"antd-mobile\";\n\n/**\n * Say something to avoid warnning from eslint\n */\nexport default function () {\n  const [model, setModel] = useModel({ preOpeningTime: new Date() });\n  const [validate, errors] = useValidation(schema);\n\n  const handleSubmit = () =>\n    validate(model)\n      .then(() => alert(\"Amazing!!\"))\n      .catch(console.error);\n\n  const handleChangeInput = (name) => (value) => setModel(name, value);\n  const handleLeaveInput = (name) => () => validate(name, model[name]);\n  const handleChangeSelect = (name) => (value) => {\n    setModel(name, value);\n    validate(name, value);\n  };\n  const renderClassName = (name, properties) =>\n    classnames(...(properties || []), {\n      error: Array.isArray(errors) && errors.some((e) => e.path === name),\n      hasValue: !(model[name] === null || typeof model[name] === \"undefined\"),\n    });\n\n  const Required = () => <i className=\"required\">*</i>;\n\n  return <div className=\"form-wrapper\"></div>;\n}`;\n\nexport default function (description) {\n  const ast = parse(CODE_TEMPLATE, { sourceType: 'module', plugins: ['jsx'] });\n  const exportDefault = ast.program.body.find(t.isExportDefaultDeclaration);\n  const returnStatement = exportDefault.declaration.body.body.find(\n    t.isReturnStatement,\n  );\n  const divElement = returnStatement.argument;\n\n  divElement.children.push(newline);\n  const newline = t.jsxText('\\n');\n  const fields = t.jsxElement(\n    t.jsxOpeningElement(t.jsxIdentifier('List'), []),\n    t.jsxClosingElement(t.jsxIdentifier('List')),\n    [newline],\n  );\n\n  for (const rule in description.rules) {\n    fields.children.push(makeField(rule));\n  }\n  divElement.children.push(newline);\n  const output = generate(ast, {}, CODE_TEMPLATE);\n\n  return output.code;\n}\n\nfunction makeField(ruleDescriptor) {\n  const dataType = ruleDescriptor.dataType;\n\n  if (!YUP_TYPE_LIST.includes(dataType)) {\n    return t.jsxEmptyExpression();\n  }\n\n  if (dataType === YUP_TYPE_DATE) {\n    return makeDatePicker(ruleDescriptor);\n  } else {\n    return makeInputItem(ruleDescriptor);\n  }\n}\n\nfunction makeRequiredElement() {\n  return t.jsxElement(\n    t.jsxOpeningElement(t.jsxIdentifier('Required'), [], true),\n    null,\n    [],\n    true,\n  );\n}\n\nfunction makeRenderClassAttribute(name) {\n  return t.jsxAttribute(\n    t.jsxIdentifier('className'),\n    t.jsxExpressionContainer(\n      t.callExpression(t.identifier('renderClassName'), [\n        t.stringLiteral(name),\n      ]),\n    ),\n  );\n}\n\nfunction makeDatePicker(ruleDescriptor) {\n  const { name, label, isRequired } = ruleDescriptor;\n  const picker = t.jsxIdentifier('DatePicker');\n  const item = t.jsxIdentifier('List.Item');\n\n  return t.jsxElement(\n    t.jsxOpeningElement(picker, [\n      t.jsxAttribute(t.identifier('mode'), t.stringLiteral('date')),\n      t.jsxAttribute(\n        t.identifier('onChange'),\n        t.jsxExpressionContainer(\n          t.callExpression(t.identifier('handleSelectChange'), [\n            t.stringLiteral(name),\n          ]),\n        ),\n      ),\n    ]),\n    t.jsxClosingElement(picker),\n    [\n      t.jsxElement(\n        t.jsxOpeningElement(item, [\n          t.jsxAttribute(t.identifier('arrow'), t.stringLiteral('horizontal')),\n          makeRenderClassAttribute(name),\n        ]),\n        t.jsxClosingElement(item),\n        [\n          t.jsxText(label),\n          isRequired === true ? makeRequiredElement() : t.jsxEmptyExpression(),\n        ],\n      ),\n    ],\n  );\n}\n\nfunction makeInputItem(ruleDescriptor) {\n  const { name, label, isRequired } = ruleDescriptor;\n  const inputItem = t.jsxIdentifier('InputItem');\n  return t.jsxElement(\n    t.jsxOpeningElement(inputItem, [\n      makeRenderClassAttribute(name),\n      t.jsxAttribute(\n        t.jsxIdentifier('onChange'),\n        t.jsxExpressionContainer(\n          t.callExpression(t.identifier('handleInputChange'), [\n            t.stringLiteral(name),\n          ]),\n        ),\n      ),\n      t.jsxAttribute(\n        t.jsxIdentifier('onBlur'),\n        t.jsxExpressionContainer(\n          t.callExpression(t.identifier('handleLeaveInput'), [\n            t.stringLiteral(name),\n          ]),\n        ),\n      ),\n    ]),\n    t.jsxClosingElement(inputItem),\n    [\n      t.jsxText(label),\n      isRequired === true ? makeRequiredElement() : t.jsxEmptyExpression(),\n    ],\n  );\n}\n","import fs from 'fs';\nimport path from 'path';\nimport parseJsonMock from './parseJsonMock';\nimport parseYupSchema from './parseYupSchema';\nimport generateYupSchema from './generateYupSchema';\nimport generateAntDesignForm from './generateAntDesignForm';\n\nexport function jsonMock2YupSchema(\n  filename,\n  saveFile = false,\n  saveFileName = 'schema.js',\n) {\n  return new Promise((resolve, reject) => {\n    console.info(\n      '==== parse JSON mock script file and generate Yup Schema ====',\n    );\n\n    return readFile(filename).then((content) => {\n      const description = parseJsonMock(content);\n      const code = generateYupSchema(description);\n\n      console.log('==  generate Yup schema ==');\n      console.log(code);\n\n      if (saveFile) {\n        return saveCode(code, saveFileName);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\nexport function yupSchema2AntDesignForm(\n  filename,\n  saveFile = false,\n  saveFileName = 'form.jsx',\n) {\n  return new Promise((resolve) => {\n    console.info(\n      '==== parse Yup schema and generate Ant-Design form code ====',\n    );\n\n    return readFile(filename).then((content) => {\n      const description = parseYupSchema(content);\n      const code = generateAntDesignForm(description);\n\n      console.log('==  generate form ==');\n      console.log(code);\n\n      if (saveFile) {\n        return saveCode(code, saveFileName);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\nfunction readFile(filename, encoding = 'utf8') {\n  return new Promise((resolve, reject) => {\n    fs.readFile(path.resolve(__dirname, filename), encoding, function (\n      err,\n      content,\n    ) {\n      if (err) {\n        console.error(err);\n        reject();\n      }\n      resolve(content);\n    });\n  });\n}\n\nfunction saveCode(code, fileName, encoding = 'utf8') {\n  return new Promise((resolve, reject) => {\n    fs.writeFile(path.resolve(__dirname, fileName), code, encoding, function (\n      err,\n    ) {\n      if (!isNullOrUndefined(err)) {\n        console.error(err);\n        reject();\n      }\n\n      console.log(filename + ' save done.');\n      resolve();\n    });\n  });\n}\n"],"names":["isNull","v","isUndefined","isNullOrUndefined","isNotEmptyArray","Array","isArray","length","isNotEmptyString","JsonMockDescription","properties","JsonMockPropertyDescriptor","key","value","annotations","JsonMockPropertyAnnotation","header","body","substring","text","ast","parse","sourceType","description","traverseJsonMockAST","propertyVisitor","ObjectProperty","path","property","makeJsonMockProperty","node","push","traverse","ExportDefaultDeclaration","ObjectExpression","astNode","leadingComments","anotations","map","comment","makeAnnotation","name","filter","i","leadingComment","trim","r","matches","match","b","c","includes","YUP_TYPE_STRING","YUP_TYPE_Number","YUP_TYPE_BOOL","YUP_TYPE_DATE","YUP_TYPE_ARRAY","YUP_TYPE_MIXED","YUP_KEYWORD_REQUIRED","YUP_KEYWORD_LABEL","YUP_TYPE_LIST","YupSchemaDescription","rules","YupSchemaRuleDescriptor","attributes","_label","_dataType","_isRequired","hasAttribute","some","find","attr","found","values","isDataTypeAttribute","YupSchemaRuleAttributeDescriptor","traverseYupSchemaAST","meetExportDefaultObjectNode","desc","objectNode","declaration","t","callee","arguments","makeRuleDescriptor","rule","console","log","error","makeValues","object","parameters","arg","elements","e","isSupported","d","jsonMockDescription","ensureKeyAnnotation","sortAnnotations","preciselyAnnotationParameters","a","method","type","detect","annotation","f","test","index","findIndex","splice","cast","Boolean","Date","Number","String","params","split","s","CODE_TEMPLATE","prepareGenerateYupSchema","objectDeclaration","program","makeRule","output","generate","ensureReadableText","code","buildChainExpression","ann","makeRuleArguments","unicodeText","dest","replace","grp","fromCharCode","parseInt","decodeURIComponent","plugins","exportDefault","returnStatement","divElement","argument","children","newline","fields","makeField","ruleDescriptor","dataType","makeDatePicker","makeInputItem","makeRequiredElement","makeRenderClassAttribute","label","isRequired","picker","item","inputItem","jsonMock2YupSchema","filename","saveFile","saveFileName","Promise","resolve","reject","info","readFile","then","content","parseJsonMock","generateYupSchema","saveCode","yupSchema2AntDesignForm","parseYupSchema","generateAntDesignForm","encoding","fs","__dirname","err","fileName","writeFile"],"mappings":"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"}